## var 和 let/const 的区别

let/const

- 块级作用域
- 不存在变量提升
- 暂时性死区
- 不可以重复声明
- 在全局作用域不会挂载到 window 对象上

## const 使用场景

声明常量 匿名函数 箭头函数

let 可以先声明后赋值，const 声明必须要赋值，

const 声明基本类型后不可以再更改，引用类型可以修改引用类型的值

## let 使用场景

定义变量 代替 var

## 深入原理理解

底层实现上，let 和 const 的工作方式是通过 js 引擎实现的，在 js 引擎中，每一个变量都会被封装在一个称为“变量对象”的容器中，这个对象包含了所有当前上下文中定义的变量和函数，变量对象类似于一个键值对的容器，其中键是变量名，值是变量的值，在 js 引擎中，使用 let 或者 const 定义变量时，实际上是将该变量定义在一个块级作用域中，而块级作用域是由编译器在编译阶段完成的

具体过程

1. 编译阶段

在代码编译阶段，编译器会扫描整个函数体，查找所有使用 let 定义的变量，为这些变量生成一个初始值 undefined 的词法环境，并保存在作用域链中

2. 进入执行上下文

当进入块级作用域（例如 if for while 等）后，会创建一个新的词法环境，如果执行块级作用域中包含 let 变量声明的语句，这些变量将被添加到这个词法环境的环境记录中

3. 绑定变量值

运行到 let 定义的变量时，js 引擎会在当前词法环境搜索该变量，首先会在当前环境变量中找到这个变量，如果不存在变量，则向当前环境的外部环境记录搜索变量，直到全局作用域，如果变量值没有被绑定，那么 js 引擎会将其绑定为 undefined，否则继续执行其他操作

4. 实现块级作用域

使用 let 定义变量时，在运行时不会在当前作用域之外创建新的执行上下文，而是会创建子遮蔽新环境，在子遮蔽的环境中，变量的值只在最接近的块级作用域生效
